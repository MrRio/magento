<?xml version="1.0"?>
<!--
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * @category   design_default
 * @package    Mage_Bundle
 * @copyright  Copyright (c) 2004-2007 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */

-->
<layout version="0.1.0">

<!--
Adding custom product price block
-->

    <catalog_category_default>
        <reference name="product_list">
            <action method="addPriceBlockType"><type>bundle</type><block>bundle/catalog_product_price</block><template>bundle/catalog/product/price.phtml</template></action>
        </reference>
    </catalog_category_default>

    <catalogsearch_result_index>
        <reference name="search_result_list">
            <action method="addPriceBlockType"><type>bundle</type><block>bundle/catalog_product_price</block><template>bundle/catalog/product/price.phtml</template></action>
        </reference>
    </catalogsearch_result_index>

    <catalogsearch_advanced_result>
        <reference name="search_result_list">
            <action method="addPriceBlockType"><type>bundle</type><block>bundle/catalog_product_price</block><template>bundle/catalog/product/price.phtml</template></action>
        </reference>
    </catalogsearch_advanced_result>

    <tag_product_list>
        <reference name="search_result_list">
            <action method="addPriceBlockType"><type>bundle</type><block>bundle/catalog_product_price</block><template>bundle/catalog/product/price.phtml</template></action>
        </reference>
    </tag_product_list>

<!--
Partof block for simple broducts
-->

   <PRODUCT_TYPE_simple>
        <reference name="product.info.additional">
            <block type="bundle/catalog_product_list_partof" before="-" name="product.info.partof" as="partof_products" template="bundle/catalog/product/list/partof.phtml">
                <action method="addPriceBlockType"><type>bundle</type><block>bundle/catalog_product_price</block><template>bundle/catalog/product/price.phtml</template></action>
            </block>
        </reference>
    </PRODUCT_TYPE_simple>

<!--
Shopping cart item renderer
-->

    <checkout_cart_index>
        <reference name="checkout.cart">
            <action method="addItemRender"><type>bundle</type><block>bundle/checkout_cart_item_renderer</block><template>bundle/checkout/cart/item.phtml</template></action>
        </reference>
    </checkout_cart_index>

<!--
Additional block for bundle product type
-->

    <PRODUCT_TYPE_bundle>
        <reference name="head">
            <action method="addItem"><type>skin_js</type><name>js/bundle.js</name></action>
        </reference>

        <reference name="product.info">
            <block type="bundle/catalog_product_view_type_bundle" name="product.info.bundle" as="product_type_data" template="bundle/catalog/product/view/type/bundle.phtml">
                <action method="addPriceBlockType"><type>bundle</type><block>bundle/catalog_product_price</block><template>bundle/catalog/product/price.phtml</template></action>
            </block>
        </reference>

        <block type="bundle/catalog_product_view_type_bundle" name="product.info.bundle.options" as="type_bundle_options" template="bundle/catalog/product/view/type/bundle/options.phtml">
            <action method="addRenderer"><type>select</type><block>bundle/catalog_product_view_type_bundle_option_select</block></action>
            <action method="addRenderer"><type>multi</type><block>bundle/catalog_product_view_type_bundle_option_multi</block></action>
            <action method="addRenderer"><type>radio</type><block>bundle/catalog_product_view_type_bundle_option_radio</block></action>
            <action method="addRenderer"><type>checkbox</type><block>bundle/catalog_product_view_type_bundle_option_checkbox</block></action>
        </block>

        <reference name="product.info.container1">
            <action method="insertBlockIfEquals"><block>product.info.bundle.options</block><if>alias_in_layout</if><equals>options_container</equals></action>
        </reference>
        <reference name="product.info.container2">
            <action method="insertBlockIfEquals"><block>product.info.bundle.options</block><if>alias_in_layout</if><equals>options_container</equals></action>
        </reference>
    </PRODUCT_TYPE_bundle>

</layout>
